<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>XingCraft Launcher Web</title>
  <style>
    body {
      font-family: monospace;
      background: linear-gradient(#3a80d6, #1e4fa3);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      color: white;
    }
    .box {
      background: rgba(0,0,0,0.7);
      padding: 20px;
      border: 2px solid white;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-width: 320px;
    }
    input, select, button {
      padding: 10px;
      font-family: monospace;
      font-size: 14px;
    }
    button {
      cursor: pointer;
      background: #222;
      color: white;
      border: 2px solid white;
      transition: 0.2s;
    }
    button:hover {
      background: #444;
      transform: scale(1.05);
    }
    .skin-preview {
      width: 64px;
      height: 64px;
      border: 2px solid white;
      background-size: cover;
      background-position: center;
      margin: auto;
    }
  </style>
</head>
<body>
  <h1>üöÄ XingCraft Launcher Web</h1>
  <div class="box">
    <label>Nickname:</label>
    <input type="text" id="nickname" placeholder="Digite seu nome">

    <label>Skin (URL da imagem):</label>
    <input type="text" id="skinUrl" placeholder="Cole link da skin">
    <div id="skinPreview" class="skin-preview"></div>

    <label>Vers√£o:</label>
    <select id="versao"></select>

    <button onclick="baixarVersao()">‚¨á Baixar Vers√£o</button>
    <button onclick="baixarFiddle()">‚ö° Baixar Electron Fiddle</button>
  </div>

  <script>
    const versionsURL = "./versions.json";

    // Preview de skin
    document.getElementById("skinUrl").addEventListener("input", e => {
      document.getElementById("skinPreview").style.backgroundImage = `url('${e.target.value}')`;
    });

    // Carrega vers√µes do JSON
    fetch(versionsURL)
      .then(r => r.json())
      .then(data => {
        const select = document.getElementById("versao");
        data.versions.forEach(v => {
          const opt = document.createElement("option");
          opt.value = v.zip;
          opt.textContent = v.name;
          select.appendChild(opt);
        });
      });

    function baixarVersao() {
      const nick = document.getElementById("nickname").value.trim();
      const url = document.getElementById("versao").value;
      const skin = document.getElementById("skinUrl").value.trim();

      if (!nick) {
        alert("Digite seu nickname!");
        return;
      }

      localStorage.setItem("xingcraft_nick", nick);
      if (skin) localStorage.setItem("xingcraft_skin", skin);

      // For√ßa download da vers√£o escolhida
      const a = document.createElement("a");
      a.href = url;
      a.download = "";
      document.body.appendChild(a);
      a.click();
      a.remove();

      alert("Vers√£o baixada! Extraia o ZIP e abra no Electron Fiddle.");
    }

    function baixarFiddle() {
      window.open("https://www.electronjs.org/fiddle", "_blank");
    }
  </script>
</body>
</html>
